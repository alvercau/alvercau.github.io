---
layout: post
title: A data science project in New York.
---

__What is the relation between a guy riding a scooter in pink lingerie and data science?__

This could be a lame, nerdy riddle, but it has been a very relevant question for me over the past few days. 

I arrived in NYC about two weeks ago, and this is my first contact with this city that does not involve TV series or Woody Allen movies. Simply put, everything looks familiar and pretty straightforward, but it isn’t. It’s a never ending journey towards understanding what the hell is going on. 
My lack of understanding this place became tangible when I – with three other fresh data scientists – tried to extract some useful information from the Metropolitan Transportation Authority turnstile data. For those of you who do not know what the MTA is, like me a week ago, it is the public transport authority that helps people get from point A to point B in the urban jungle called New York, either by bus or on the subway, as you prefer. What turnstile data is and how it can tell you something about New York, took me a while to unravel.  
First of all, having some gaps in my English vocabulary, I didn’t know what ‘turnstile’ refers to. My first thought, considering the public transport context, us that turnstiles are things that involve turning, and orthographically problematic style. Given that style usually has little to do with transportation, I assumed turnstiles are the turning doors that accept money in exchange of letting you through and reach the subway platforms. Google images confirmed my hypothesis.  
Second, even knowing what a turnstile is, I couldn’t make sense of the data, by shear lack of domain knowledge. People who know me will confirm that bicycles are an extension of my body, so no matter where I go, the first thing I will do is find a bike that will turn each trip into an adventure. I found a shiny black and golden bike that would bring me from Red Hook to the Flatiron district in no time, allowing me to get lost in random places, and discover smells, noises and little dashes of beauty that I would never encounter if I were efficiently transported by MTA vehicles.  
The downside is of course that I had no clue how the subway functions around here. My partners in data science literally had to make a drawing of a subway station for me to understand the MTA turnstile data.  
This is how it goes: you get in through a turnstile, and each time a person goes through a turnstile, the counter will count one entry. When you get out, you again go through a turnstile and the counter adds an exit. A single turnstile is smart enough to deal with both entries and exits. Humans tend to be in a hurry, so often they do not bother exiting through a turnstile but rather choose the emergency exit, which is always open. A consequence is that the number of entries exceeds the number of exits, which might lead you to wrongly believe that there is a black hole in the NYC subway swallowing a good amount of unlucky travelers on a daily basis. 

We are getting closer to the scooter guy in pink lingerie. Don’t give up.

Turnstiles may be able to deal with both entries and exits, but things can go terribly wrong. I have the impression that there is some sort of miscounting virus affecting the turnstile population, causing them to suddenly count backwards, or giving them miscounting hiccups which makes them randomly add an absurd number of entries or exits to their counter. The population of New York might be enormous, but still, I find it hard to believe that millions of people go through a single turnstile in a four-hour period. Turnstiles aren’t _that_ awesome.  
Then there is this other thing: some stations have multiple personalities. Thus, when you change lines, sometimes you exit the station and enter the same station again (in a different dimension or something like that), causing turnstiles to count one and the same person multiple times. So if you want to know how many people go through this type of stations, good luck. It gets even harder if you do not know which stations suffer from multiple personalities.  
Anyway, after three days of data cleaning, we managed to identify the busiest stations in New York. We got a neat list of twenty stations, and of course, not knowing this city, I had no idea whether the list made sense or whether we made some terrible mistakes in our analysis. Luckily my three partners in data science had a better understanding of the mysteries of New York and confirmed that we probably did a good job. 

__Moral of the story:__ domain knowledge is half of your analysis. If you ever feel like exploring the MTA datasets, it’s probably a good idea to enter the bowels of New York through a turnstile (beware of the miscounting virus!), take a random train on a random line, get out on a random stop, take a peek outside and sit on a bench for a while examining the flow of people to know whether you got to an important station, and repeat the whole process for at least a day.  

The downside is that you probably won’t see the guy in pink lingerie riding his scooter down 26th Street, and if you ask me, people like him are what makes the journey worthwhile.

